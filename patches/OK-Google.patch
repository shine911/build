From 4bbc5613c7bbf1c1cf54b9b01568c09b8528e7b8 Mon Sep 17 00:00:00 2001
From: Qui Huynh <deathbook1999@gmail.com>
Date: Mon, 30 Jun 2014 09:36:12 -0400
Subject: [PATCH] Fix Ok goole

Change-Id: I0c73f78fccdb22a15c241db07dab5286f164ded6
---
 core/jni/android_media_AudioRecord.cpp | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

diff --git a/core/jni/android_media_AudioRecord.cpp b/core/jni/android_media_AudioRecord.cpp
index c9882c4..cdeab0d 100644
--- a/core/jni/android_media_AudioRecord.cpp
+++ b/core/jni/android_media_AudioRecord.cpp
@@ -197,9 +197,19 @@ android_media_AudioRecord_setup(JNIEnv *env, jobject thiz, jobject weak_this,
                 // Java channel masks map directly to the native definition
         jint audioFormat, jint buffSizeInBytes, jintArray jSession)
 {
-    //ALOGV(">> Entering android_media_AudioRecord_setup");
-    //ALOGV("sampleRate=%d, audioFormat=%d, channel mask=%x, buffSizeInBytes=%d",
-    //     sampleRateInHertz, audioFormat, channelMask, buffSizeInBytes);
+	//ALOGI(">> Entering android_media_AudioRecord_setup");
+    //ALOGI("sampleRate=%d, audioFormat=%d, channel mask=%x, buffSizeInBytes=%d, source=%d",
+    // sampleRateInHertz, audioFormat, channelMask, buffSizeInBytes, source);
+#ifdef STE_HARDWARE
+ALOGI(">> Entering android_media_AudioRecord_setup");
+    ALOGI("sampleRate=%d, audioFormat=%d, channel mask=%x, buffSizeInBytes=%d, source=%d",
+         sampleRateInHertz, audioFormat, channelMask, buffSizeInBytes, source);
+    /* We don't have mic source 1999 so switch to regular mic source 1*/
+    if(source == 1999){
+source = 1;
+ALOGI("STE_HARDWARE source switched from 1999 to 1");
+}
+#endif
 
     if (!audio_is_input_channel(channelMask)) {
         ALOGE("Error creating AudioRecord: channel mask %#x is not valid.", channelMask);
@@ -662,4 +672,4 @@ int register_android_media_AudioRecord(JNIEnv *env)
             kClassPathName, gMethods, NELEM(gMethods));
 }
 
-// ----------------------------------------------------------------------------
+// ----------------------------------------------------------------------------
\ No newline at end of file
-- 
1.9.1

